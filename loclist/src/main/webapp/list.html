<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html 
     PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <title>Loclist</title>
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no" />
    <link rel="apple-touch-icon" href="/apple-touch-icon.png"/>
    <link rel="apple-touch-startup-image" href="/apple-touch-startup-image.png"/>
    <link rel="stylesheet" href="/css/style.css" type="text/css" />
    <script type="text/javascript" src="/js/jquery-1.4.4.min.js"></script>
    <script type="text/javascript" src="/js/simple-confirm-0.1.js"></script>
    <script type="text/javascript">
      var itemListId;
      var itemListName;

      function checkin(position) {
          latitude = position.coords.latitude; 
          longitude = position.coords.longitude;
          url = '/action/checkin/' + itemListId + '/' + latitude + '/' + longitude;
          $('div#content').load(url);
      }
      
      function handleError(error) {
          alert(error);
      }
      
      function listIndex() {
        $('div#content').load('/action/list', function() {
          $('div#content a.checkin').click(listShow);
        });
      }

      function listShow() {
        itemListId = $(this).attr('href');
        itemListName = $(this).text();
        $('div#header h1').empty()
        $('div#header h1').append(itemListName);
        navigator.geolocation.getCurrentPosition(checkin, handleError);
        return false;
      }
    
      $(document).ready(function() {
        window.scrollTo(0, 1);
        $('.focus').focus();
        listIndex();
      });
    </script>
  </head>
  <body>
    <div id="header">
      <h1>
      Lists
      </h1>
      <div id="headerLeft">
      </div>
      <div id="headerRight">
        add
      </div>
    </div>
    <div id="content">
    </div>
    <div id="user"></div>
  </body>
</html>
